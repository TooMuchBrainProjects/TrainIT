@using WebGui.Services
@using WebGui.Pages
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject UserService UserService

<MudThemeProvider IsDarkMode="true"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudMainContent Style="padding: 0;">
        @Body
    </MudMainContent>
    <NavMenu/>
</MudLayout>

@code {
    
    public bool IsDarkMode { get; set; }
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
            return;
        
        if (!await UserService.IsAuthenticated())
        {
            NavigationManager.NavigateTo("/auth/register");
        }
    }

}